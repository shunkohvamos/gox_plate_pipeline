---
description: 
alwaysApply: true
---

# Figure Quality — ALL figures are paper-grade (PNG only, flexible aspect ratio)

## Core policy
このプロジェクトで生成する図は、用途（診断/デバッグ/最終）に関係なく **すべて論文品質（paper-grade）** とする。
ユーザーから特段の指示がない限り、このルールを常に優先する。

## Language
- 図中テキスト（title/axis labels/ticks/legend/annotation）は **英語のみ**。
- 日本語文字（全角）を図に含めない。

## Typography (default)
- フォント：**Arial を最優先**。環境に Arial が無い場合は **Helvetica**、それも無ければ **DejaVu Sans**（最終fallback）。
- 図内フォントは **必ず1系統に統一**（混在禁止）。
- 文字サイズ：最終掲載サイズ換算で **5–8 pt** 帯（原則：6–7 pt目安）。
- パネルラベル（a,b,c…）を使う場合：**8 pt, bold**。

## Lines & markers
- 線幅：最終サイズ換算で **0.25–1.0 pt**（原則：0.6–0.9 pt目安）。
- マーカー：印刷で判別できる最小限。大きすぎるマーカーは禁止。
- グリッドは必要最小限（主張しすぎるグリッドは禁止）。

## Layout (aspect ratio must be flexible)
- **アスペクト比（横長/縦長）は固定しない**。図の内容に応じて最適な比を選ぶ。
- ただし “論文らしさ” のために、サイズ設計は以下を基本とする：
  - 基準幅（推奨）：1カラム相当の幅を第一候補にする（約90 mm相当）。
  - 高さはデータ量・凡例・パネル数に合わせて調整し、要素が詰まりすぎないようにする。
- 余白を取りすぎない。データが図面積をしっかり使う。
- 凡例はデータを隠さない位置に置く（必要なら外側配置）。

## Color policy
- 赤緑の判別が難しい配色、虹色（jet等）のカラーマップは原則禁止。
- 色数は必要以上に増やさない（意味付けがある色だけ使う）。
- **polymer_id の色は永続マップで固定**し、過去登場IDは同色を維持する。

## File formats (PNG only)
- すべての図は **PNGを必ず出力**する（これが正）。
- PNGは掲載サイズに対して **300–600 dpi相当**（線・文字中心のプロットは600寄り）になるように設定する。
- 図ファイル名には **run_id / bo_run_id** を含める（rawパスは図に書かない）。

## Implementation requirement
- matplotlib のスタイルは rcParams で集中管理し、すべてのプロット生成経路で必ず適用する。
- “この図だけ特例” を作らない（例外はユーザー指示がある場合のみ）。
- savefig は bbox_inches="tight" 等を用い、不要な余白を抑える。
